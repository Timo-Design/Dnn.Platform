@using ClientDependency.Core
@using ClientDependency.Core.Mvc
@model DotNetNuke.Framework.Models.PageModel
@{

    var SkinPath = Path.GetDirectoryName(Model.Skin.SkinSrc);
}
<!DOCTYPE html>
<html lang="@Model.Language">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    @if (!string.IsNullOrEmpty(Model.MetaRefresh))
    {
        <meta id="MetaRefresh" http-equiv="Refresh" name="Refresh" content="Model.MetaRefresh" />
    }
    @if (!string.IsNullOrEmpty(Model.Description))
    {
        <meta id="MetaDescription" name="description" content="@Model.Description" />
    }
    @if (!string.IsNullOrEmpty(Model.KeyWords))
    {
        <meta id="MetaKeywords" name="keywords" content="@Model.KeyWords" />
    }
    @if (!string.IsNullOrEmpty(Model.Copyright))
    {
        <meta id="MetaCopyright" name="copyright" content="@Model.Copyright" />
    }
    @if (!string.IsNullOrEmpty(Model.Generator))
    {
        <meta id="MetaGenerator" name="generator" Visible="@Model.Generator" />
    }
    @*<meta id="MetaAuthor" name="author" Visible="" />*@
    @if (!string.IsNullOrEmpty(Model.MetaRobots))
    {
        <meta id="MetaRobots" name="robots" Visible="@Model.MetaRobots" />
    }
    @if (!string.IsNullOrEmpty(Model.FavIconLink))
    {
        @Html.Raw(Model.FavIconLink)
    }
    @RenderSection("metas", required: false)
    <title>[MVC] @Model.Title</title>
    @Html.RenderCssHere(new BasicPath("SkinPath", SkinPath), new BasicPath("SharedScripts", "~/Resources/Shared/Scripts/"))
    @RenderSection("stylesheets", required: false)
    @Html.RenderJsHere(new BasicPath("SkinPath", SkinPath), new BasicPath("SharedScripts", "~/Resources/Shared/Scripts/"))
    @RenderSection("scripts", required: false)
</head>
<body class="@(Model.Skin.BodyCssClass)">
    <form id="Form">
        <div class="aspNetHidden">
            <input name="ScrollTop" type="hidden" id="ScrollTop" />
            <input name="__dnnVariable" type="hidden" id="__dnnVariable" autocomplete="off" value="@Newtonsoft.Json.JsonConvert.SerializeObject(Model.ClientVariables)">
            @Html.Raw(Model.AntiForgery)
        </div>
    </form>
    @if (!string.IsNullOrEmpty(Model.Skin.ControlPanelRazor))
    {
        @Html.Action("Index", Model.Skin.ControlPanelRazor, Model);
    }
    @RenderBody()
    <script>
        var dnn = dnn || {};
        dnn.panes = [];
        dnn.panesClientIds = [];
        $(".dnnPane").each(function () {
            //$(this).removeClass('DNNEmptyPane').addClass('dnnDropEmptyPanes');
            dnn.panes.push($(this).attr("data-name"));
            dnn.panesClientIds.push($(this).attr("id"));
        });
	@foreach(var s in Model.StartupScripts)
	{
		@Html.Raw(s.Value);
	}
    </script>
</body>
</html>
